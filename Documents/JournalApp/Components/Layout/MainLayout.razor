@inherits LayoutComponentBase
@inject IAuthService AuthService

@implements IDisposable

@if (isLoading)
{
    <div class="d-flex justify-content-center align-items-center" style="height: 100vh;">
        <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
}
else
{
    <div class="page">
        <div class="sidebar">
            <NavMenu />
        </div>

        <main>
            <article class="content px-4">
                @Body
            </article>
        </main>
    </div>
}

@code {
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        // Initialize database
        await AuthService.InitializeDatabaseAsync();
        
        isLoading = false;
        StateHasChanged();
    }

    public void Dispose()
    {
        // Cleanup if needed
    }
}